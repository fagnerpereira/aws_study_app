<!-- app/views/games/index.html.erb -->

<%
  games_meta = [
    { name: "Service Match", path: games_service_match_path, icon: "🧩", description: "Match AWS services to their correct categories.", color: "from-blue-500 to-cyan-400" },
    { name: "Architecture Challenge", path: games_architecture_challenge_path, icon: "🏗️", description: "Design a solution for a common architectural scenario.", color: "from-green-500 to-emerald-400" },
    { name: "Cost Calculator", path: games_cost_calculator_path, icon: "💰", description: "Estimate the monthly cost of an AWS setup.", color: "from-orange-500 to-red-400" },
    { name: "Quick Quiz", path: games_quick_quiz_path, icon: "⚡", description: "Test your knowledge with rapid-fire questions.", color: "from-purple-500 to-pink-400" },
    { name: "Scenario Tree", path: games_scenario_tree_path, icon: "🌳", description: "Navigate a branching scenario to solve a problem.", color: "from-indigo-500 to-violet-400" }
  ]
%>

<!-- Top Navigation Bar -->
<nav class="bg-white/95 backdrop-blur-sm border-b border-white/20 sticky top-0 z-50 shadow-lg">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-20">
      <!-- Logo & Back Button -->
      <div class="flex items-center space-x-4">
        <%= link_to root_path, class: "flex items-center space-x-3" do %>
          <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg floating">
            <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
            </svg>
          </div>
          <div>
            <h1 class="text-2xl font-black gradient-text">AWS Study Quest</h1>
            <p class="text-xs text-gray-600 font-semibold">Master SAA-C03 Certification</p>
          </div>
        <% end %>
      </div>

      <%= render "layouts/user_stats" %>
    </div>
  </div>
</nav>

<!-- Games Hub Header -->
<div class="bg-gray-800 py-12">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <h1 class="text-4xl font-black text-white">AWS Games Arcade</h1>
    <p class="text-white/90 text-lg max-w-3xl mx-auto mt-2">Sharpen your skills and earn XP through these fun challenges!</p>
  </div>
</div>

<!-- Main Content -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
  <!-- Games Grid -->
  <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
    <% games_meta.each do |game| %>
      <div class="game-card bg-white rounded-3xl shadow-2xl overflow-hidden transform hover:-translate-y-2 transition-transform duration-300">
        <div class="p-8">
          <div class="flex items-center mb-4">
            <span class="text-5xl mr-4"><%= game[:icon] %></span>
            <div>
              <h3 class="text-2xl font-black text-gray-800"><%= game[:name] %></h3>
              <p class="text-gray-600 text-sm"><%= game[:description] %></p>
            </div>
          </div>
          <%= link_to "Play Now", game[:path], class: "block w-full text-center bg-gradient-to-r #{game[:color]} text-white font-bold py-4 px-6 rounded-2xl hover:shadow-xl transition-all duration-200" %>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Game Stats -->
  <div class="mt-16 bg-white/10 backdrop-blur rounded-3xl p-8 text-center">
    <h3 class="text-2xl font-black text-white mb-6">Your Arcade Stats</h3>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="bg-white/20 rounded-2xl p-4">
        <div class="text-3xl font-black text-white"><%= @games_played.keys.uniq.count %> / <%= @total_games %></div>
        <div class="text-white/80 font-bold text-sm">Games Played</div>
      </div>
      <div class="bg-white/20 rounded-2xl p-4">
        <div class="text-3xl font-black text-white"><%= @total_xp_earned %></div>
        <div class="text-white/80 font-bold text-sm">Total XP Earned</div>
      </div>
      <div class="bg-white/20 rounded-2xl p-4">
        <div class="text-3xl font-black text-white"><%= @games_played.values.flatten.count %></div>
        <div class="text-white/80 font-bold text-sm">Total Play Sessions</div>
      </div>
    </div>
  </div>
</div>
